const body=document.querySelector("body"),modalMenu=body.querySelector(".modal-menu"),overlay=body.querySelector(".modal-overlay"),buttonMenu=body.querySelector(".header__button-menu"),menuClose=modalMenu.querySelector(".modal-menu__close"),menuLinks=modalMenu.querySelectorAll(".modal-menu__nav-link"),languageButtonLink=body.querySelector(".language__button-link"),groupButtons=body.querySelectorAll(".group__button"),recordingLink=body.querySelector(".recording__link"),modalForm=body.querySelector(".modal-form"),formClose=modalForm.querySelector(".modal-form__close"),form=modalForm.querySelector("#sign-up"),dataSabmitUrl="https://echo.htmlacademy.ru/",getTemplateContent=(e,o)=>e.querySelector(`#${o}`).content.querySelector(`.${o}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),map=L.map("map").setView({lat:59.938667,lng:30.323073},17);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);const mainPinIcon=L.icon({iconUrl:"img/stack.svg#pin",iconSize:[32,39],iconAnchor:[16,39]}),mainPinMarker=L.marker({lat:59.938667,lng:30.323073},{icon:mainPinIcon});mainPinMarker.addTo(map);const onAddForm=()=>{modalForm.classList.remove("d-none"),overlay.classList.remove("d-none")},onRemoveForm=()=>{modalForm.classList.add("d-none"),overlay.classList.add("d-none")},onShowModal=()=>{modalMenu.classList.remove("d-none"),overlay.classList.remove("d-none")},onRemoveModal=()=>{modalMenu.classList.add("d-none"),overlay.classList.add("d-none")},checkWidth=()=>{window.innerWidth>=1367&&onRemoveModal()},onEscRemoveModal=e=>{"Escape"!==e.key&&"Esc"!==e.key||onRemoveModal()},onEscRemoveForm=e=>{"Escape"!==e.key&&"Esc"!==e.key||onRemoveForm()},onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},onElementEscRemove=e=>{"Escape"!==e.key&&"Esc"!==e.key||(onSuccessRemove(),document.removeEventListener("keydown",onElementEscRemove))},alertSuccess=()=>{body.append(successElement),document.addEventListener("keydown",onElementEscRemove),document.addEventListener("click",onSuccessRemove)},onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},onErrorEscRemove=()=>{isEscEvent&&(onErrorRemove(),document.removeEventListener("keydown",onErrorEscRemove))},alertError=()=>{onRemoveForm(),body.append(successErrorLoading),document.addEventListener("keydown",onErrorEscRemove),document.addEventListener("click",onErrorRemove)},alertForm=()=>{body.append(successElement),document.addEventListener("keydown",onElementEscRemove),document.addEventListener("click",onSuccessRemove),onRemoveForm()},sendData=(e,o,n,r)=>{fetch(e,{method:"POST",body:o}).then((e=>{e.ok?n():r()})).catch((()=>{r()}))},onFormSend=e=>{e.preventDefault();const o=new FormData(e.target);var n,r;n=alertForm,r=alertError,fetch(dataSabmitUrl,{method:"POST",body:o}).then((e=>{e.ok?n():r()})).catch((()=>{r()}))};for(const e of groupButtons)e.addEventListener("click",onAddForm);form.addEventListener("submit",onFormSend),document.addEventListener("keydown",onEscRemoveModal),document.addEventListener("keydown",onEscRemoveForm),recordingLink.addEventListener("click",onAddForm),languageButtonLink.addEventListener("click",onAddForm),formClose.addEventListener("click",onRemoveForm),window.addEventListener("resize",checkWidth),buttonMenu.addEventListener("click",onShowModal),menuClose.addEventListener("click",onRemoveModal);for(const e of menuLinks)e.addEventListener("click",onRemoveModal);$(document).ready((()=>{$(".teachers__slider").owlCarousel({loop:!0,margin:30,nav:!0,center:!0,navText:[" "],dots:!1,responsive:{0:{items:1},768:{items:3},1366:{items:4,nav:!0,center:!1}}})}));